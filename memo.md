全探索はn^2
n は 10000程度までなら間に合う